<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>stac-rs</title>

	<link rel="stylesheet" href="dist/reset.css">
	<link rel="stylesheet" href="dist/reveal.css">
	<link rel="stylesheet" href="dist/theme/solarized.css">

	<!-- Theme used for syntax highlighted code -->
	<link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<section>
					<h1>stac-rs</h1>
					<p>
						<img src="img/rustacean-and-stac.png" width="30%" />
					</p>
					<p>
						High-performance, reliable STAC tooling with Rust
					</p>
					<p>
						by Pete Gadomski
					</p>
				</section>
				<section>
					<p>No Rust code in these slides</p>
					<p>
						ðŸ¤¯
					</p>
				</section>
			</section>
			<section>
				<section>
					<h1>A bit about STAC</h1>

					<ul>
						<li>Open community specification</li>
						<li><a href="https://github.com/radiantearth/stac-spec/">Core</a> v1.0.0 released May 2021</li>
						<li><a href="https://github.com/radiantearth/stac-api-spec">API</a> v1.0.0 released April 2023
						</li>
					</ul>

					<blockquote>
						STAC is a map to the data. <br />
						&mdash; Hobu
					</blockquote>
				</section>
				<section>
					<h1>Development</h1>
					<img src="img/open-spec-development.png" />
				</section>
				<section>
					<div class="r-stack">
						<img src="img/who-stac-is-for.png" width="100%" />
						<img src="img/who-stac-is-for-annotated.png" class="fragment" width="100%"
							data-fragment-index="1" />
					</div>
					<div class="fragment" data-fragment-index="1">
						<img src="img/chef.png" width="30%" />
						<img src="img/waiter.jpg" width="30%" />
						<img src="img/eating.jpg" width="30%" />
					</div>
				</section>
				<section>
					<h1>STAC entities</h1>
					<div class="r-stack">
						<img src="img/stac-entities.png" width="50%" />
						<img src="img/stac-entities-with-assets.png" class="fragment" width="50%" />
					</div>
				</section>
				<section>
					<h1>STAC usage</h1>
					<img src="img/stac-usage.png" width="70%" />
				</section>
			</section>
			<section>
				<section>
					<h1>Why <strong>stac-rs</strong>?</h1>
					<ul>
						<li>Ecosystem diversity</li>
						<li>Improve support for servers (developers) and consumers (data users)</li>
						<li>Language binding support (e.g. Python, WASM)</li>
					</ul>
				</section>
				<section>
					<h1>Installing</h1>

					<p>
						Install Rust:
					<pre><code data-trim data-noescape class="language-shell">
						$ curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
					</code></pre>

					Then, install <strong>stac-cli</strong>:
					<pre><code data-trim data-noescape class="language-shell">
						$ cargo install stac-cli
					</code></pre>
					</p>

					<div class="fragment">
						<p>
							Then:
						</p>

						<pre><code data-trim data-noescape class="language-shell">
$ stac --help
Command line interface for stac-rs

Usage: stac [OPTIONS] <COMMAND>

Commands:
  item       Creates a STAC Item
  migrate    Migrates a STAC value from one version to another
  search     Searches a STAC API
  serve      Serves a STAC API
  sort       Sorts the fields of STAC object
  translate  Translates STAC values between formats
  validate   Validates a STAC object or API endpoint using json-schema validation
  help       Print this message or the help of the given subcommand(s)

Options:
  -c, --compact                        Use a compact representation of the output, if possible
  -i, --input-format <INPUT_FORMAT>    The input format
  -o, --output-format <OUTPUT_FORMAT>  The output format
  -h, --help                           Print help
  -V, --version                        Print version
					</code></pre>
					</div>
				</section>
			</section>
			<section>
				<section>
					<h1>For producers</h1>

					<img src="img/chef.png" width="50%" />
				</section>
				<section>
					<h1>Create</h1>

					<pre><code data-trim data-noescape class="language-shell">
$ stac item an-id
{
	"type": "Feature",
	"stac_version": "1.0.0",
	"id": "an-id",
	"geometry": null,
	"properties": {
		"datetime": "2024-08-27T20:37:29.293151Z"
	},
	"links": [],
	"assets": {}
}
					</code></pre>
				</section>
				<section>
					<h1>Create (raster)</h1>

					<pre style="font-size: large;"><code data-trim data-noescape class="language-shell">
$ stac item \
  https://storage.googleapis.com/open-cogs/stac-examples/20201211_223832_CS2.tif \
  > item.json
					</code></pre>

					<div class="r-stack">
						<img src="img/raster.png" width="50%" />
						<img src="img/item.png" width="50%" class="fragment" />
					</div>
				</section>
				<section>
					<h1>Migrate</h1>

					<pre><code data-trim data-noescape class="language-shell" style="font-size: medium;">
						$ stac migrate bands-v1.0.0.json --version 1.1.0-beta.1 | jq '.stac_version, .assets.example.bands'   
						"1.1.0-beta.1"
						[
						  {
							"name": "r",
							"eo:common_name": "red"
						  },
						  {
							"name": "g",
							"eo:common_name": "green"
						  },
						  {
							"name": "b",
							"eo:common_name": "blue"
						  },
						  {
							"name": "nir",
							"eo:common_name": "nir",
							"raster:spatial_resolution": 30
						  }
						]
					</code></pre>
				</section>
				<section>
					<h1>Translate</h1>

					<pre><code data-trim data-noescape class="language-shell" style="font-size: x-large;">
$ stac translate 1000-sentinel-items.json 1000-sentinel-items.parquet
					</code></pre>
					<pre><code data-trim data-noescape class="language-shell" style="font-size: x-large;">
$ du -h 1000-sentinel-items.*
 24M	1000-sentinel-items.json
6.3M	1000-sentinel-items.parquet
					</code></pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Interlude: Geoparquet</h2>

					<ul>
						<li>
							Stores geospatial vector data in Parquet, a columnar format for tabular data
						</li>
						<li>
							v1.1.0 release May 2024
						</li>
						<li>
							<a href="https://github.com/geoarrow/geoarrow">geoarrow</a> is a related specification
							that describes memory layout and field-level metadata
						</li>
					</ul>
				</section>
				<section>
					<p>
						ðŸ¤” STAC items are geospatial vectors
					</p>
				</section>
				<section>
					<h1>stac-geoparquet</h1>

					<ul>
						<li>
							<a
								href="https://github.com/stac-utils/stac-geoparquet">https://github.com/stac-utils/stac-geoparquet</a>
						</li>
						<li>
							<strong>stac-rs</strong> includes an implementation
						</li>
						<li>
							Moves <code>properties</code> to the top level, along with a couple other tweaks
						</li>
						<li>
							ðŸ˜¢ STAC isn't perfect for GeoParquet
						</li>
					</ul>
				</section>
			</section>
			<section>
				<section>
					<h1>For servers</h1>

					<img src="img/waiter.jpg" width="50%" />
				</section>
				<section>
					<h1>Serve</h1>

					<pre><code data-trim data-noescape class="language-shell" style="font-size: x-large;">
$ stac serve spec-examples/v1.0.0/collection.json
Serving a STAC API at http://127.0.0.1:7822 using a memory backend
					</code></pre>

					<p>
						<img src="img/stac-browser.png">
					</p>
				</section>
				<section>
					<h1>Serve items</h1>

					<p>

					<pre><code data-trim data-noescape class="language-shell" style="font-size: large;">
	$ stac search https://planetarycomputer.microsoft.com/api/stac/v1 -c sentinel-2-l2a \
		--intersects '{"type":"Point","coordinates":[-105.1019,40.1672]}' \
		--max-items 1000 --sortby="-properties.datetime" 1000-sentinel-2-items.json
						</code></pre>

					<pre><code data-trim data-noescape class="language-shell" style="font-size: large;">
	$ stac serve 1000-sentinel-items.json
	Serving a STAC API at http://127.0.0.1:7822 using a memory backend
						</code></pre>
					</p>

					<p>
						<img src="img/stac-browser-items.png">
					</p>
				</section>
				<section>
					<h1>Serve pgstac</h1>

					<p>
					<pre><code data-trim data-noescape class="language-shell" style="font-size: large;">
$ stac serve \
	--pgstac postgresql://username:password@localhost:5432/postgis \
	1000-sentinel-2-items.json   
Serving a STAC API at http://127.0.0.1:7822 using a pgstac backend
						</code></pre>
					</p>
					<p>
						<img src="img/stac-browser-items.png">
					</p>
				</section>
				<section>
					<h1>"Benchmarks"</h1>

					<div style="font-size: x-large;">
						<table>
							<tr>
								<th>Test</th>
								<th>stac-rs</th>
								<th>stac-fastapi</th>
								<th>Speedup</th>
							</tr>
							<tr>
								<td>One page of items</td>
								<td>48.3 ms Â± 3.2 ms</td>
								<td>62.0 ms Â± 2.2 ms</td>
								<td>22%</td>
							</tr>
							<tr>
								<td>Search everything</td>
								<td>4.460 s Â± 0.061 s</td>
								<td>5.894 s Â± 0.045 s</td>
								<td>24%</td>
							</tr>
						</table>
					</div>
					<div style="font-size: x-large; margin-top: 26px;">
						<ul>
							<li>1000 Sentinel-2 items over Colorado</li>
							<li><strong>pgstac</strong> backend</li>
							<li><code>localhost</code></li>
						</ul>
					</div>

				</section>
			</section>
			<section>
				<h1>stac-rs crates</h1>
				<img src=" img/stac-rs-crates.png" width="50%" />
			</section>
		</div>
	</div>

	<script src="dist/reveal.js"></script>
	<script src="plugin/notes/notes.js"></script>
	<script src="plugin/markdown/markdown.js"></script>
	<script src="plugin/highlight/highlight.js"></script>
	<script>
		// More info about initialization & config:
		// - https://revealjs.com/initialization/
		// - https://revealjs.com/config/
		Reveal.initialize({
			hash: true,

			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
		});
	</script>
</body>

</html>